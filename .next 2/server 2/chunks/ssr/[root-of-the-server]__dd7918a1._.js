module.exports=[93695,(a,b,c)=>{b.exports=a.x("next/dist/shared/lib/no-fallback-error.external.js",()=>require("next/dist/shared/lib/no-fallback-error.external.js"))},67112,a=>{a.n(a.i(86326))},34222,a=>{a.n(a.i(89316))},6247,a=>{a.n(a.i(11006))},28251,a=>{a.n(a.i(34635))},43423,a=>{a.n(a.i(2841))},22340,a=>{a.n(a.i(30829))},53937,a=>{"use strict";var b=a.i(44663);function c(a,c){let d=(0,b.toDate)(a,c?.in);return d.setHours(23,59,59,999),d}a.s(["endOfDay",()=>c])},24511,a=>{"use strict";let b={};function c(){return b}a.s(["getDefaultOptions",()=>c])},89778,a=>{"use strict";var b=a.i(44663);function c(a,c){let d=(0,b.toDate)(a,c?.in),e=d.getMonth();return d.setFullYear(d.getFullYear(),e+1,0),d.setHours(23,59,59,999),d}a.s(["endOfMonth",()=>c])},88454,a=>{"use strict";a.s(["AddTaskDialog",()=>b]);let b=(0,a.i(27671).registerClientReference)(function(){throw Error("Attempted to call AddTaskDialog() from the server but AddTaskDialog is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"[project]/Desktop/worflow-app/components/work/add-task-dialog.tsx <module evaluation>","AddTaskDialog")},47616,a=>{"use strict";a.s(["AddTaskDialog",()=>b]);let b=(0,a.i(27671).registerClientReference)(function(){throw Error("Attempted to call AddTaskDialog() from the server but AddTaskDialog is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"[project]/Desktop/worflow-app/components/work/add-task-dialog.tsx","AddTaskDialog")},45923,a=>{"use strict";a.i(88454);var b=a.i(47616);a.n(b)},94086,a=>{"use strict";a.s(["WorkFilters",()=>b]);let b=(0,a.i(27671).registerClientReference)(function(){throw Error("Attempted to call WorkFilters() from the server but WorkFilters is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"[project]/Desktop/worflow-app/components/work/work-filters.tsx <module evaluation>","WorkFilters")},59466,a=>{"use strict";a.s(["WorkFilters",()=>b]);let b=(0,a.i(27671).registerClientReference)(function(){throw Error("Attempted to call WorkFilters() from the server but WorkFilters is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"[project]/Desktop/worflow-app/components/work/work-filters.tsx","WorkFilters")},38220,a=>{"use strict";a.i(94086);var b=a.i(59466);a.n(b)},27487,a=>{"use strict";a.s(["WorkTaskList",()=>b]);let b=(0,a.i(27671).registerClientReference)(function(){throw Error("Attempted to call WorkTaskList() from the server but WorkTaskList is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"[project]/Desktop/worflow-app/components/work/work-task-list.tsx <module evaluation>","WorkTaskList")},58985,a=>{"use strict";a.s(["WorkTaskList",()=>b]);let b=(0,a.i(27671).registerClientReference)(function(){throw Error("Attempted to call WorkTaskList() from the server but WorkTaskList is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"[project]/Desktop/worflow-app/components/work/work-task-list.tsx","WorkTaskList")},16530,a=>{"use strict";a.i(27487);var b=a.i(58985);a.n(b)},81948,a=>{"use strict";a.s(["WorkCalendar",()=>b]);let b=(0,a.i(27671).registerClientReference)(function(){throw Error("Attempted to call WorkCalendar() from the server but WorkCalendar is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"[project]/Desktop/worflow-app/components/work/work-calendar.tsx <module evaluation>","WorkCalendar")},11658,a=>{"use strict";a.s(["WorkCalendar",()=>b]);let b=(0,a.i(27671).registerClientReference)(function(){throw Error("Attempted to call WorkCalendar() from the server but WorkCalendar is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"[project]/Desktop/worflow-app/components/work/work-calendar.tsx","WorkCalendar")},48776,a=>{"use strict";a.i(81948);var b=a.i(11658);a.n(b)},24934,a=>{"use strict";var b=a.i(55744),c=a.i(63270),d=a.i(13666),e=a.i(38220),f=a.i(45923),g=a.i(16530),h=a.i(48776),i=a.i(53937),j=a.i(24511),k=a.i(44663),l=a.i(89778);async function m({searchParams:a}){let m=await (0,c.auth)();if(!m?.user?.id)return null;let{view:n,projectId:o,assigneeId:p,period:q,display:r}=await a,s="calendar"===r,t={status:{not:"ARCHIVED"}};if("mine"===n?t.assigneeId=m.user.id:p&&"all"!==p&&(t.assigneeId=p),o&&"all"!==o&&(t.projectId=o),!s&&q){let a=new Date;switch(q){case"daily":t.dueDate={lte:(0,i.endOfDay)(a)};break;case"weekly":var u;let b,c,d,e;t.dueDate={lte:(u={weekStartsOn:1},b=(0,j.getDefaultOptions)(),c=u?.weekStartsOn??u?.locale?.options?.weekStartsOn??b.weekStartsOn??b.locale?.options?.weekStartsOn??0,e=(d=(0,k.toDate)(a,u?.in)).getDay(),d.setDate(d.getDate()+((e<c?-7:0)+6-(e-c))),d.setHours(23,59,59,999),d)};break;case"monthly":t.dueDate={lte:(0,l.endOfMonth)(a)}}}let v=await d.prisma.workItem.findMany({where:t,include:{project:!0,assignee:!0},orderBy:{dueDate:"asc"}}),w=await d.prisma.project.findMany({orderBy:{name:"asc"},select:{id:!0,name:!0,allowedTaskTypes:!0}}),x=await d.prisma.user.findMany({orderBy:{name:"asc"},select:{id:!0,name:!0,role:!0,email:!0,avatarUrl:!0}});return(0,b.jsxs)("div",{className:"space-y-6",children:[(0,b.jsxs)("div",{className:"flex flex-col md:flex-row md:items-center justify-between gap-4",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("h1",{className:"text-3xl font-bold tracking-tight",children:"Work Overview"}),(0,b.jsx)("p",{className:"text-muted-foreground",children:"Master view of all active tasks across the agency."})]}),(0,b.jsxs)("div",{className:"flex flex-col sm:flex-row items-start sm:items-center gap-2",children:[(0,b.jsx)(e.WorkFilters,{projects:w,users:x}),(0,b.jsx)(f.AddTaskDialog,{projects:w})]})]}),s?(0,b.jsx)(h.WorkCalendar,{items:v,users:x}):(0,b.jsx)(g.WorkTaskList,{initialWorkItems:v,users:x,currentUserRole:m.user.role})]})}a.s(["default",()=>m],24934)}];

//# sourceMappingURL=%5Broot-of-the-server%5D__dd7918a1._.js.map