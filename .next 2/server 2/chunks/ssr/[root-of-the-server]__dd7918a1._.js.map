{"version":3,"sources":["../../../../../../Desktop/worflow-app/node_modules/date-fns/endOfDay.js","../../../../../../Desktop/worflow-app/node_modules/date-fns/_lib/defaultOptions.js","../../../../../../Desktop/worflow-app/node_modules/date-fns/endOfMonth.js","../../../../../../Desktop/worflow-app/components/work/add-task-dialog.tsx/__nextjs-internal-proxy.mjs","../../../../../../Desktop/worflow-app/components/work/work-filters.tsx/__nextjs-internal-proxy.mjs","../../../../../../Desktop/worflow-app/components/work/work-task-list.tsx/__nextjs-internal-proxy.mjs","../../../../../../Desktop/worflow-app/components/work/work-calendar.tsx/__nextjs-internal-proxy.mjs","../../../../../../Desktop/worflow-app/app/%28authenticated%29/work/page.tsx","../../../../../../Desktop/worflow-app/node_modules/date-fns/endOfWeek.js"],"sourcesContent":["import { toDate } from \"./toDate.js\";\n\n/**\n * The {@link endOfDay} function options.\n */\n\n/**\n * @name endOfDay\n * @category Day Helpers\n * @summary Return the end of a day for the given date.\n *\n * @description\n * Return the end of a day for the given date.\n * The result will be in the local timezone.\n *\n * @typeParam DateType - The `Date` type, the function operates on. Gets inferred from passed arguments. Allows to use extensions like [`UTCDate`](https://github.com/date-fns/utc).\n * @typeParam ResultDate - The result `Date` type, it is the type returned from the context function if it is passed, or inferred from the arguments.\n *\n * @param date - The original date\n * @param options - An object with options\n *\n * @returns The end of a day\n *\n * @example\n * // The end of a day for 2 September 2014 11:55:00:\n * const result = endOfDay(new Date(2014, 8, 2, 11, 55, 0))\n * //=> Tue Sep 02 2014 23:59:59.999\n */\nexport function endOfDay(date, options) {\n  const _date = toDate(date, options?.in);\n  _date.setHours(23, 59, 59, 999);\n  return _date;\n}\n\n// Fallback for modularized imports:\nexport default endOfDay;\n","let defaultOptions = {};\n\nexport function getDefaultOptions() {\n  return defaultOptions;\n}\n\nexport function setDefaultOptions(newOptions) {\n  defaultOptions = newOptions;\n}\n","import { toDate } from \"./toDate.js\";\n\n/**\n * The {@link endOfMonth} function options.\n */\n\n/**\n * @name endOfMonth\n * @category Month Helpers\n * @summary Return the end of a month for the given date.\n *\n * @description\n * Return the end of a month for the given date.\n * The result will be in the local timezone.\n *\n * @typeParam DateType - The `Date` type, the function operates on. Gets inferred from passed arguments. Allows to use extensions like [`UTCDate`](https://github.com/date-fns/utc).\n * @typeParam ResultDate - The result `Date` type, it is the type returned from the context function if it is passed, or inferred from the arguments.\n *\n * @param date - The original date\n * @param options - An object with options\n *\n * @returns The end of a month\n *\n * @example\n * // The end of a month for 2 September 2014 11:55:00:\n * const result = endOfMonth(new Date(2014, 8, 2, 11, 55, 0))\n * //=> Tue Sep 30 2014 23:59:59.999\n */\nexport function endOfMonth(date, options) {\n  const _date = toDate(date, options?.in);\n  const month = _date.getMonth();\n  _date.setFullYear(_date.getFullYear(), month + 1, 0);\n  _date.setHours(23, 59, 59, 999);\n  return _date;\n}\n\n// Fallback for modularized imports:\nexport default endOfMonth;\n","// This file is generated by next-core EcmascriptClientReferenceModule.\nimport { registerClientReference } from \"react-server-dom-turbopack/server\";\nexport const AddTaskDialog = registerClientReference(\n    function() { throw new Error(\"Attempted to call AddTaskDialog() from the server but AddTaskDialog is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.\"); },\n    \"[project]/Desktop/worflow-app/components/work/add-task-dialog.tsx\",\n    \"AddTaskDialog\",\n);\n","// This file is generated by next-core EcmascriptClientReferenceModule.\nimport { registerClientReference } from \"react-server-dom-turbopack/server\";\nexport const WorkFilters = registerClientReference(\n    function() { throw new Error(\"Attempted to call WorkFilters() from the server but WorkFilters is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.\"); },\n    \"[project]/Desktop/worflow-app/components/work/work-filters.tsx\",\n    \"WorkFilters\",\n);\n","// This file is generated by next-core EcmascriptClientReferenceModule.\nimport { registerClientReference } from \"react-server-dom-turbopack/server\";\nexport const WorkTaskList = registerClientReference(\n    function() { throw new Error(\"Attempted to call WorkTaskList() from the server but WorkTaskList is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.\"); },\n    \"[project]/Desktop/worflow-app/components/work/work-task-list.tsx\",\n    \"WorkTaskList\",\n);\n","// This file is generated by next-core EcmascriptClientReferenceModule.\nimport { registerClientReference } from \"react-server-dom-turbopack/server\";\nexport const WorkCalendar = registerClientReference(\n    function() { throw new Error(\"Attempted to call WorkCalendar() from the server but WorkCalendar is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.\"); },\n    \"[project]/Desktop/worflow-app/components/work/work-calendar.tsx\",\n    \"WorkCalendar\",\n);\n","import { auth } from \"@/auth\"\nimport { prisma } from \"@/lib/prisma\"\nimport { Card, CardContent } from \"@/components/ui/card\"\nimport { Briefcase } from \"lucide-react\"\nimport { WorkFilters } from \"@/components/work/work-filters\"\nimport { AddTaskDialog } from \"@/components/work/add-task-dialog\"\nimport { WorkTaskList } from \"@/components/work/work-task-list\"\nimport { WorkCalendar } from \"@/components/work/work-calendar\"\nimport { startOfDay, endOfDay, startOfWeek, endOfWeek, startOfMonth, endOfMonth } from \"date-fns\"\n\nexport default async function WorkPage({ searchParams }: { searchParams: Promise<{ view?: string, projectId?: string, assigneeId?: string, period?: string, display?: string }> }) {\n    const session = await auth()\n    if (!session?.user?.id) return null\n\n    const { view, projectId, assigneeId, period, display } = await searchParams\n    const showMineOnly = view === \"mine\"\n    const isCalendar = display === \"calendar\"\n\n    // Construct filter conditions\n    const whereClause: any = {\n        status: { not: \"ARCHIVED\" },\n    }\n\n    if (showMineOnly) {\n        whereClause.assigneeId = session.user.id\n    } else if (assigneeId && assigneeId !== \"all\") {\n        whereClause.assigneeId = assigneeId\n    }\n\n    if (projectId && projectId !== \"all\") {\n        whereClause.projectId = projectId\n    }\n\n    // Date Filtering Logic (Only for List View)\n    if (!isCalendar && period) {\n        const now = new Date()\n        switch (period) {\n            case \"daily\":\n                whereClause.dueDate = {\n                    lte: endOfDay(now)\n                }\n                break\n            case \"weekly\":\n                whereClause.dueDate = {\n                    lte: endOfWeek(now, { weekStartsOn: 1 }) // Assuming Monday start\n                }\n                break\n            case \"monthly\":\n                whereClause.dueDate = {\n                    lte: endOfMonth(now)\n                }\n                break\n            // 'all' or undefined does nothing\n        }\n    }\n\n    // Fetch work items\n    const workItems = await prisma.workItem.findMany({\n        where: whereClause,\n        include: {\n            project: true,\n            assignee: true\n        },\n        orderBy: { dueDate: 'asc' } // Sort by due date for time-sensitive views\n    })\n\n    // Fetch projects for dropdown\n    const projects = await prisma.project.findMany({\n        orderBy: { name: 'asc' },\n        select: { id: true, name: true, allowedTaskTypes: true }\n    })\n\n    // Fetch users for dropdown\n    const users = await prisma.user.findMany({\n        orderBy: { name: 'asc' },\n        select: { id: true, name: true, role: true, email: true, avatarUrl: true }\n    })\n\n    return (\n        <div className=\"space-y-6\">\n            <div className=\"flex flex-col md:flex-row md:items-center justify-between gap-4\">\n                <div>\n                    <h1 className=\"text-3xl font-bold tracking-tight\">Work Overview</h1>\n                    <p className=\"text-muted-foreground\">\n                        Master view of all active tasks across the agency.\n                    </p>\n                </div>\n                <div className=\"flex flex-col sm:flex-row items-start sm:items-center gap-2\">\n                    <WorkFilters projects={projects} users={users} />\n                    <AddTaskDialog projects={projects} />\n                </div>\n            </div>\n\n            {isCalendar ? (\n                <WorkCalendar items={workItems} users={users} />\n            ) : (\n                <WorkTaskList initialWorkItems={workItems} users={users} currentUserRole={session.user.role} />\n            )}\n        </div>\n    )\n}\n","import { getDefaultOptions } from \"./_lib/defaultOptions.js\";\nimport { toDate } from \"./toDate.js\";\n\n/**\n * The {@link endOfWeek} function options.\n */\n\n/**\n * @name endOfWeek\n * @category Week Helpers\n * @summary Return the end of a week for the given date.\n *\n * @description\n * Return the end of a week for the given date.\n * The result will be in the local timezone.\n *\n * @typeParam DateType - The `Date` type, the function operates on. Gets inferred from passed arguments. Allows to use extensions like [`UTCDate`](https://github.com/date-fns/utc).\n * @typeParam ResultDate - The result `Date` type, it is the type returned from the context function if it is passed, or inferred from the arguments.\n *\n * @param date - The original date\n * @param options - An object with options\n *\n * @returns The end of a week\n *\n * @example\n * // The end of a week for 2 September 2014 11:55:00:\n * const result = endOfWeek(new Date(2014, 8, 2, 11, 55, 0))\n * //=> Sat Sep 06 2014 23:59:59.999\n *\n * @example\n * // If the week starts on Monday, the end of the week for 2 September 2014 11:55:00:\n * const result = endOfWeek(new Date(2014, 8, 2, 11, 55, 0), { weekStartsOn: 1 })\n * //=> Sun Sep 07 2014 23:59:59.999\n */\nexport function endOfWeek(date, options) {\n  const defaultOptions = getDefaultOptions();\n  const weekStartsOn =\n    options?.weekStartsOn ??\n    options?.locale?.options?.weekStartsOn ??\n    defaultOptions.weekStartsOn ??\n    defaultOptions.locale?.options?.weekStartsOn ??\n    0;\n\n  const _date = toDate(date, options?.in);\n  const day = _date.getDay();\n  const diff = (day < weekStartsOn ? -7 : 0) + 6 - (day - weekStartsOn);\n\n  _date.setDate(_date.getDate() + diff);\n  _date.setHours(23, 59, 59, 999);\n  return _date;\n}\n\n// Fallback for modularized imports:\nexport default endOfWeek;\n"],"names":[],"mappings":"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","ignoreList":[0,1,2,3,4,5,6,8]}