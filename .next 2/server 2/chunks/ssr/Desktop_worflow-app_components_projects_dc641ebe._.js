module.exports=[11696,a=>{"use strict";var b=a.i(8275),c=a.i(40351);let d=(0,c.createServerReference)("60dc1f2054eaf353cccf71a8ec09302619ef2ba1f0",c.callServer,void 0,c.findSourceMapURL,"updateProjectTeam"),e=(0,c.createServerReference)("604066eb68f804756429ebcd4e2475cbcd251dea51",c.callServer,void 0,c.findSourceMapURL,"updateProjectAccess");var f=a.i(58487),g=a.i(1770);let h=(0,a.i(56942).default)("users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["path",{d:"M16 3.128a4 4 0 0 1 0 7.744",key:"16gr8j"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]]);var i=a.i(37326),j=a.i(96023),k=a.i(36154),l=a.i(38663),m=a.i(19422),n=a.i(90801),o=a.i(12250);function p({project:a,allUsers:c,templateGroups:p=[]}){let q=(0,i.useRouter)(),[r,s]=(0,j.useState)(!1),[t,u]=(0,j.useState)(!1),[v,w]=(0,j.useState)(a.managerId||"none"),[x,y]=(0,j.useState)(a.seniorId||"none"),[z,A]=(0,j.useState)(a.associateId||"none"),[B,C]=(0,j.useState)(a.allowedTaskTypes||"Bookkeeping,Audit,Meeting,990,General"),[D,E]=(0,j.useState)(a.assignedTemplates?.map(a=>a.id)||[]),[F,G]=(0,j.useState)(a.users.map(a=>a.id)),H=async()=>{u(!0),await d(a.code,{managerId:v,seniorId:x,associateId:z,allowedTaskTypes:B,assignedTemplateIds:D}),await e(a.code,F),u(!1),s(!1),q.refresh()};return(0,b.jsxs)(g.Dialog,{open:r,onOpenChange:s,children:[(0,b.jsx)(g.DialogTrigger,{asChild:!0,children:(0,b.jsxs)(f.Button,{variant:"outline",size:"sm",className:"gap-2",children:[(0,b.jsx)(h,{className:"h-4 w-4"}),"Settings & Team"]})}),(0,b.jsxs)(g.DialogContent,{className:"sm:max-w-[600px] max-h-[90vh] overflow-y-auto",children:[(0,b.jsxs)(g.DialogHeader,{children:[(0,b.jsx)(g.DialogTitle,{children:"Project Team & Settings"}),(0,b.jsx)(g.DialogDescription,{children:"Manage team, templates, and access."})]}),(0,b.jsxs)(m.Tabs,{defaultValue:"team",className:"w-full",children:[(0,b.jsxs)(m.TabsList,{className:"grid w-full grid-cols-4",children:[(0,b.jsx)(m.TabsTrigger,{value:"team",children:"Team"}),(0,b.jsx)(m.TabsTrigger,{value:"templates",children:"Templates"}),(0,b.jsx)(m.TabsTrigger,{value:"types",children:"Types"}),(0,b.jsx)(m.TabsTrigger,{value:"access",children:"Access"})]}),(0,b.jsxs)(m.TabsContent,{value:"team",className:"space-y-4 py-4",children:[(0,b.jsxs)("div",{className:"grid gap-4",children:[(0,b.jsxs)("div",{className:"grid gap-2",children:[(0,b.jsx)(k.Label,{children:"Manager"}),(0,b.jsxs)(l.Select,{value:v,onValueChange:w,children:[(0,b.jsx)(l.SelectTrigger,{children:(0,b.jsx)(l.SelectValue,{placeholder:"Select Manager"})}),(0,b.jsxs)(l.SelectContent,{children:[(0,b.jsx)(l.SelectItem,{value:"none",children:"None"}),c.map(a=>(0,b.jsx)(l.SelectItem,{value:a.id||"unknown",children:a.name||a.email},a.id))]})]})]}),(0,b.jsxs)("div",{className:"grid gap-2",children:[(0,b.jsx)(k.Label,{children:"Senior"}),(0,b.jsxs)(l.Select,{value:x,onValueChange:y,children:[(0,b.jsx)(l.SelectTrigger,{children:(0,b.jsx)(l.SelectValue,{placeholder:"Select Senior"})}),(0,b.jsxs)(l.SelectContent,{children:[(0,b.jsx)(l.SelectItem,{value:"none",children:"None"}),c.map(a=>(0,b.jsx)(l.SelectItem,{value:a.id||"unknown",children:a.name||a.email},a.id))]})]})]}),(0,b.jsxs)("div",{className:"grid gap-2",children:[(0,b.jsx)(k.Label,{children:"Associate"}),(0,b.jsxs)(l.Select,{value:z,onValueChange:A,children:[(0,b.jsx)(l.SelectTrigger,{children:(0,b.jsx)(l.SelectValue,{placeholder:"Select Associate"})}),(0,b.jsxs)(l.SelectContent,{children:[(0,b.jsx)(l.SelectItem,{value:"none",children:"None"}),c.map(a=>(0,b.jsx)(l.SelectItem,{value:a.id||"unknown",children:a.name||a.email},a.id))]})]})]})]}),(0,b.jsx)("p",{className:"text-xs text-muted-foreground mt-4",children:"Templates will use these roles to automatically assign tasks."})]}),(0,b.jsx)(m.TabsContent,{value:"templates",className:"py-4",children:(0,b.jsxs)("div",{className:"grid gap-2",children:[(0,b.jsx)(k.Label,{className:"mb-2",children:"Assigned Template Groups"}),(0,b.jsx)("div",{className:"grid gap-2 max-h-[300px] overflow-y-auto border rounded-md p-2",children:0===p.length?(0,b.jsx)("div",{className:"text-sm text-center text-muted-foreground p-4",children:"No template groups available."}):p.map(a=>(0,b.jsxs)("div",{className:"flex items-center space-x-2 p-2 hover:bg-muted/50 rounded",children:[(0,b.jsx)(o.Checkbox,{id:`tpl-${a.id}`,checked:D.includes(a.id),onCheckedChange:()=>{var b;return b=a.id,void E(a=>a.includes(b)?a.filter(a=>a!==b):[...a,b])}}),(0,b.jsxs)("div",{className:"grid gap-0.5",children:[(0,b.jsx)(k.Label,{htmlFor:`tpl-${a.id}`,className:"font-medium cursor-pointer",children:a.name}),a.description&&(0,b.jsx)("span",{className:"text-xs text-muted-foreground",children:a.description})]})]},a.id))}),(0,b.jsx)("p",{className:"text-xs text-muted-foreground mt-2",children:"Select which template groups are relevant for this project."})]})}),(0,b.jsx)(m.TabsContent,{value:"types",className:"space-y-4 py-4",children:(0,b.jsxs)("div",{className:"grid gap-2",children:[(0,b.jsx)(k.Label,{children:"Allowed Task Types"}),(0,b.jsx)("p",{className:"text-xs text-muted-foreground",children:"Comma-separated list of task types available in this project."}),(0,b.jsx)(n.Input,{value:B,onChange:a=>C(a.target.value),placeholder:"Audit, Bookkeeping, Tax, General"})]})}),(0,b.jsxs)(m.TabsContent,{value:"access",className:"py-4",children:[(0,b.jsx)("div",{className:"grid gap-2 max-h-[300px] overflow-y-auto border rounded-md p-2",children:c.map(a=>(0,b.jsxs)("div",{className:"flex items-center space-x-2 p-2 hover:bg-muted/50 rounded",children:[(0,b.jsx)(o.Checkbox,{id:`user-${a.id}`,checked:!!a.id&&F.includes(a.id),onCheckedChange:()=>{var b;return a.id&&(b=a.id,void G(a=>a.includes(b)?a.filter(a=>a!==b):[...a,b]))}}),(0,b.jsx)(k.Label,{htmlFor:`user-${a.id}`,className:"flex-1 cursor-pointer",children:a.name||a.email})]},a.id))}),(0,b.jsx)("p",{className:"text-xs text-muted-foreground mt-2",children:"Selected users can view this project."})]})]}),(0,b.jsxs)(g.DialogFooter,{children:[(0,b.jsx)(f.Button,{variant:"outline",onClick:()=>s(!1),children:"Cancel"}),(0,b.jsx)(f.Button,{onClick:H,disabled:t,children:t?"Saving...":"Save Changes"})]})]})]})}a.s(["ProjectSettingsDialog",()=>p],11696)},10639,a=>{"use strict";var b=a.i(8275),c=a.i(58487),d=a.i(1770),e=a.i(38663),f=a.i(36154),g=a.i(90801),h=a.i(96023),i=a.i(97273);let j=(0,a.i(56942).default)("copy-plus",[["line",{x1:"15",x2:"15",y1:"12",y2:"18",key:"1p7wdc"}],["line",{x1:"12",x2:"18",y1:"15",y2:"15",key:"1nscbv"}],["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]]);var k=a.i(37326);function l({projectId:a,templateGroups:l,currentUserId:m}){let n=(0,k.useRouter)(),[o,p]=(0,h.useState)(!1),[q,r]=(0,h.useState)(!1),[s,t]=(0,h.useState)(""),[u,v]=(0,h.useState)(new Date().toISOString().split("T")[0]),w=async()=>{if(!s)return;r(!0);let b=new FormData;b.append("groupId",s),b.append("projectIds",JSON.stringify([a])),b.append("assigneeId",m),b.append("startDate",u);let c=await (0,i.runTemplate)(b);r(!1),c.success?(p(!1),n.refresh()):(console.error(c.error),alert("Failed to apply template"))};return(0,b.jsxs)(d.Dialog,{open:o,onOpenChange:p,children:[(0,b.jsx)(d.DialogTrigger,{asChild:!0,children:(0,b.jsxs)(c.Button,{variant:"outline",size:"sm",className:"gap-2",children:[(0,b.jsx)(j,{className:"h-4 w-4"}),"Apply Template"]})}),(0,b.jsxs)(d.DialogContent,{children:[(0,b.jsxs)(d.DialogHeader,{children:[(0,b.jsx)(d.DialogTitle,{children:"Apply Task Template"}),(0,b.jsx)(d.DialogDescription,{children:"Select a template group to create tasks for this project."})]}),(0,b.jsxs)("div",{className:"grid gap-4 py-4",children:[(0,b.jsxs)("div",{className:"grid gap-2",children:[(0,b.jsx)(f.Label,{children:"Template Group"}),(0,b.jsxs)(e.Select,{value:s,onValueChange:t,children:[(0,b.jsx)(e.SelectTrigger,{children:(0,b.jsx)(e.SelectValue,{placeholder:"Select a template..."})}),(0,b.jsxs)(e.SelectContent,{children:[l.map(a=>(0,b.jsx)(e.SelectItem,{value:a.id,children:a.name},a.id)),0===l.length&&(0,b.jsx)("div",{className:"p-2 text-sm text-muted-foreground text-center",children:"No templates found. Go to Templates to create one."})]})]})]}),(0,b.jsxs)("div",{className:"grid gap-2",children:[(0,b.jsx)(f.Label,{children:"Start Date"}),(0,b.jsx)(g.Input,{type:"date",value:u,onChange:a=>v(a.target.value)}),(0,b.jsx)("p",{className:"text-xs text-muted-foreground",children:"Due dates will be calculated relative to this date."})]})]}),(0,b.jsxs)(d.DialogFooter,{children:[(0,b.jsx)(c.Button,{variant:"outline",onClick:()=>p(!1),children:"Cancel"}),(0,b.jsx)(c.Button,{onClick:w,disabled:q||!s,children:q?"Applying...":"Apply Template"})]})]})]})}a.s(["ApplyTemplateDialog",()=>l],10639)},49022,a=>{"use strict";var b=a.i(8275),c=a.i(96023),d=a.i(52088),e=a.i(58487),f=a.i(27787),g=a.i(56942);let h=(0,g.default)("ellipsis",[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"19",cy:"12",r:"1",key:"1wjl8i"}],["circle",{cx:"5",cy:"12",r:"1",key:"1pcz8c"}]]),i=(0,g.default)("layout-template",[["rect",{width:"18",height:"7",x:"3",y:"3",rx:"1",key:"f1a2em"}],["rect",{width:"9",height:"7",x:"3",y:"14",rx:"1",key:"jqznyg"}],["rect",{width:"5",height:"7",x:"16",y:"14",rx:"1",key:"q5h2i8"}]]);var j=a.i(67997),k=a.i(70823),l=a.i(66179);function m({tasks:a,users:g,project:m}){let[n,o]=(0,c.useState)(null),[p,q]=(0,c.useState)(!1),r=a=>{o(a),q(!0)};return 0===a.length?(0,b.jsxs)("div",{className:"flex flex-col items-center justify-center p-8 border rounded-lg bg-muted/10 border-dashed text-center",children:[(0,b.jsx)(i,{className:"h-10 w-10 text-muted-foreground mb-4 opacity-50"}),(0,b.jsx)("h3",{className:"font-medium text-lg",children:"No tasks yet"}),(0,b.jsx)("p",{className:"text-sm text-muted-foreground max-w-sm mt-1 mb-4",children:"Get started by creating a new task or applying a template to this project."}),(0,b.jsx)(l.AddTaskDialog,{projects:[{id:m.id,name:m.name,allowedTaskTypes:m.allowedTaskTypes}],defaultProjectId:m.id})]}):(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)("div",{className:"border rounded-md overflow-hidden bg-card",children:a.map(a=>(0,b.jsxs)("div",{onClick:()=>r(a),className:"group flex items-center justify-between p-4 border-b last:border-0 hover:bg-muted/50 transition-colors cursor-pointer",children:[(0,b.jsxs)("div",{className:"flex items-start gap-3",children:[(0,b.jsxs)("div",{className:"mt-1 flex items-center gap-2",children:[(0,b.jsx)(e.Button,{variant:"ghost",size:"icon",className:`h-5 w-5 rounded-full border ${"DONE"===a.status?"bg-primary text-primary-foreground border-primary":"border-muted-foreground/30 hover:border-primary"}`,onClick:b=>{b.stopPropagation(),"DONE"!==a.status&&(o(a),r(a))},children:"DONE"===a.status&&(0,b.jsx)(j.Check,{className:"h-3 w-3"})}),(0,b.jsx)(d.Badge,{variant:"DONE"===a.status?"outline":"secondary",children:a.status})]}),(0,b.jsxs)("div",{className:"space-y-1",children:[(0,b.jsx)("p",{className:"font-medium leading-none",children:a.title}),(0,b.jsxs)("div",{className:"flex items-center gap-2 text-xs text-muted-foreground",children:[(0,b.jsx)("span",{children:a.priority}),a.taskType&&(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)("span",{children:"•"}),(0,b.jsx)("span",{children:a.taskType})]}),a.dueDate&&(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)("span",{children:"•"}),(0,b.jsxs)("span",{children:["Due ",new Date(a.dueDate).toLocaleDateString()]})]})]})]})]}),(0,b.jsxs)("div",{className:"flex items-center gap-4",children:[a.assignee&&(0,b.jsxs)(f.Avatar,{className:"h-6 w-6",children:[(0,b.jsx)(f.AvatarImage,{src:a.assignee.avatarUrl}),(0,b.jsx)(f.AvatarFallback,{className:"text-[10px]",children:a.assignee.name?.[0]})]}),(0,b.jsx)(e.Button,{variant:"ghost",size:"icon",className:"h-8 w-8 opacity-0 group-hover:opacity-100",children:(0,b.jsx)(h,{className:"h-4 w-4"})})]})]},a.id))}),(0,b.jsx)(k.TaskDetailSheet,{task:n,open:p,onOpenChange:q,users:g})]})}a.s(["ProjectTaskList",()=>m],49022)}];

//# sourceMappingURL=Desktop_worflow-app_components_projects_dc641ebe._.js.map