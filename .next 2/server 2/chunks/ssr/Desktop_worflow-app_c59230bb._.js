module.exports=[53115,(a,b,c)=>{"use strict";function d(a){for(let b=0;b<a.length;b++){let c=a[b];if("function"!=typeof c)throw Object.defineProperty(Error(`A "use server" file can only export async functions, found ${typeof c}.
Read more: https://nextjs.org/docs/messages/invalid-use-server-value`),"__NEXT_ERROR_CODE",{value:"E352",enumerable:!1,configurable:!0})}}Object.defineProperty(c,"__esModule",{value:!0}),Object.defineProperty(c,"ensureServerEntryExports",{enumerable:!0,get:function(){return d}})},27373,a=>{"use strict";var b=a.i(51223),c=a.i(63270),d=a.i(13666),e=a.i(66975),f=a.i(49341),g=a.i(40820),h=a.i(53115);let i=f.z.object({name:f.z.string().min(2),avatarUrl:f.z.string().url().optional().or(f.z.literal(""))}),j=f.z.object({currentPassword:f.z.string().min(1),newPassword:f.z.string().min(6),confirmPassword:f.z.string().min(6)}).refine(a=>a.newPassword===a.confirmPassword,{message:"Passwords do not match",path:["confirmPassword"]});async function k(a){let b=await (0,c.auth)();if(!b?.user?.id)return{error:"Unauthorized"};let f={name:a.get("name")},g=i.safeParse({...f,avatarUrl:""});if(!g.success)return{error:g.error.flatten().fieldErrors};try{return await d.prisma.user.update({where:{id:b.user.id},data:{name:g.data.name}}),(0,e.revalidatePath)("/settings"),{success:"Profile updated successfully"}}catch(a){return{error:"Failed to update profile"}}}async function l(a){let b=await (0,c.auth)();if(!b?.user?.id)return{error:"Unauthorized"};let e={currentPassword:a.get("currentPassword"),newPassword:a.get("newPassword"),confirmPassword:a.get("confirmPassword")},f=j.safeParse(e);if(!f.success)return{error:f.error.flatten().fieldErrors};let{currentPassword:h,newPassword:i}=f.data,k=await d.prisma.user.findUnique({where:{id:b.user.id}});if(!k||!k.password)return{error:"User not found"};if(!await g.default.compare(h,k.password))return{error:"Incorrect current password"};let l=await g.default.hash(i,10);try{return await d.prisma.user.update({where:{id:b.user.id},data:{password:l}}),{success:"Password changed successfully"}}catch(a){return{error:"Failed to change password"}}}async function m(){let a=await (0,c.auth)();return a?.user?.id?await d.prisma.user.findMany({select:{id:!0,name:!0,email:!0,role:!0,avatarUrl:!0},orderBy:{name:"asc"}}):[]}(0,h.ensureServerEntryExports)([k,l,m]),(0,b.registerServerReference)(k,"405ecb337e474ca485a267934222e68fc27a3be732",null),(0,b.registerServerReference)(l,"40de9e3b1508506c7fdf0853c7631da623a36d56ef",null),(0,b.registerServerReference)(m,"00b1cfea4e5e65ecb8d20ccaab42f120649d3da462",null),a.s(["changePassword",()=>l,"getTeamMembers",()=>m,"updateProfile",()=>k])},19733,a=>{"use strict";var b=a.i(43379),c=a.i(27373);a.s([],13474),a.i(13474),a.s(["001ceff8282c4239bec770d6cac094d371cf582016",()=>b.$$RSC_SERVER_ACTION_0,"00b1cfea4e5e65ecb8d20ccaab42f120649d3da462",()=>c.getTeamMembers,"405ecb337e474ca485a267934222e68fc27a3be732",()=>c.updateProfile,"40de9e3b1508506c7fdf0853c7631da623a36d56ef",()=>c.changePassword],19733)}];

//# sourceMappingURL=Desktop_worflow-app_c59230bb._.js.map