module.exports=[53115,(a,b,c)=>{"use strict";function d(a){for(let b=0;b<a.length;b++){let c=a[b];if("function"!=typeof c)throw Object.defineProperty(Error(`A "use server" file can only export async functions, found ${typeof c}.
Read more: https://nextjs.org/docs/messages/invalid-use-server-value`),"__NEXT_ERROR_CODE",{value:"E352",enumerable:!1,configurable:!0})}}Object.defineProperty(c,"__esModule",{value:!0}),Object.defineProperty(c,"ensureServerEntryExports",{enumerable:!0,get:function(){return d}})},17606,a=>{"use strict";var b=a.i(51223),c=a.i(63270),d=a.i(13666),e=a.i(66975);async function f(){let a=await (0,c.auth)();if(!a?.user?.id)return[];try{return await d.prisma.user.findMany({select:{id:!0,name:!0,email:!0,avatarUrl:!0,role:!0,managerId:!0,manager:{select:{id:!0,name:!0}}},orderBy:{name:"asc"}})}catch(a){return console.error("Failed to fetch users:",a),[]}}async function g(a,b,f){let g=await (0,c.auth)();if(!g?.user?.id)return{error:"Unauthorized"};try{return await d.prisma.user.update({where:{id:a},data:{role:b,managerId:"none"===f?null:f}}),(0,e.revalidatePath)("/settings/users"),{success:!0}}catch(a){return console.error("Failed to update user:",a),{error:"Failed to update user"}}}(0,a.i(53115).ensureServerEntryExports)([f,g]),(0,b.registerServerReference)(f,"00052ab1fab1b8579fa088cb15217f3f2c849b69f1",null),(0,b.registerServerReference)(g,"70efc01e1693331f116310be4b7f9679e63cbd9d54",null),a.s(["getUsers",()=>f,"updateUserRoleAndManager",()=>g])},22438,a=>{"use strict";var b=a.i(43379),c=a.i(51223),d=a.i(63270),e=a.i(13666),f=a.i(66975),g=a.i(49341),h=a.i(53115);let i=g.z.object({title:g.z.string().min(1),driveLink:g.z.string().url(),projectId:g.z.string().optional().nullable()});async function j(a){let b=await (0,d.auth)();if(!b?.user?.id)return{error:"Unauthorized"};let c={title:a.get("title"),driveLink:a.get("driveLink"),projectId:"none"===a.get("projectId")?null:a.get("projectId")},g=i.safeParse(c);if(!g.success)return{error:g.error.flatten().fieldErrors};try{return await e.prisma.workItem.create({data:{title:g.data.title,status:"DONE",priority:"P2",driveLink:g.data.driveLink,projectId:g.data.projectId||null,assigneeId:b.user.id}}),(0,f.revalidatePath)("/files"),{success:!0}}catch(a){return{error:"Failed to create file log"}}}(0,h.ensureServerEntryExports)([j]),(0,c.registerServerReference)(j,"40d8264f5e1679d5a8a666431aef58e7212afeb1d4",null);var k=a.i(17606);a.s([],9841),a.i(9841),a.s(["00052ab1fab1b8579fa088cb15217f3f2c849b69f1",()=>k.getUsers,"001ceff8282c4239bec770d6cac094d371cf582016",()=>b.$$RSC_SERVER_ACTION_0,"40d8264f5e1679d5a8a666431aef58e7212afeb1d4",()=>j,"70efc01e1693331f116310be4b7f9679e63cbd9d54",()=>k.updateUserRoleAndManager],22438)}];

//# sourceMappingURL=Desktop_worflow-app_84720e5c._.js.map