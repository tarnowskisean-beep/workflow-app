module.exports=[93695,(a,b,c)=>{b.exports=a.x("next/dist/shared/lib/no-fallback-error.external.js",()=>require("next/dist/shared/lib/no-fallback-error.external.js"))},67112,a=>{a.n(a.i(86326))},34222,a=>{a.n(a.i(89316))},6247,a=>{a.n(a.i(11006))},28251,a=>{a.n(a.i(34635))},43423,a=>{a.n(a.i(2841))},22340,a=>{a.n(a.i(30829))},56498,a=>{"use strict";var b=a.i(55744),c=a.i(97990);function d({className:a,...d}){return(0,b.jsx)("div",{"data-slot":"card",className:(0,c.cn)("bg-card text-card-foreground flex flex-col gap-6 rounded-xl border py-6 shadow-sm transition-all duration-200 hover:shadow-md",a),...d})}function e({className:a,...d}){return(0,b.jsx)("div",{"data-slot":"card-header",className:(0,c.cn)("@container/card-header grid auto-rows-min grid-rows-[auto_auto] items-start gap-2 px-6 has-data-[slot=card-action]:grid-cols-[1fr_auto] [.border-b]:pb-6",a),...d})}function f({className:a,...d}){return(0,b.jsx)("div",{"data-slot":"card-title",className:(0,c.cn)("leading-none font-semibold",a),...d})}function g({className:a,...d}){return(0,b.jsx)("div",{"data-slot":"card-description",className:(0,c.cn)("text-muted-foreground text-sm",a),...d})}function h({className:a,...d}){return(0,b.jsx)("div",{"data-slot":"card-content",className:(0,c.cn)("px-6",a),...d})}a.s(["Card",()=>d,"CardContent",()=>h,"CardDescription",()=>g,"CardHeader",()=>e,"CardTitle",()=>f])},76298,a=>{"use strict";var b=a.i(55744),c=a.i(63270),d=a.i(69744),e=a.i(56498),f=a.i(80145),g=a.i(97990);let h=f.forwardRef(({className:a,...c},d)=>(0,b.jsx)("div",{className:"relative w-full overflow-auto",children:(0,b.jsx)("table",{ref:d,className:(0,g.cn)("w-full caption-bottom text-sm",a),...c})}));h.displayName="Table";let i=f.forwardRef(({className:a,...c},d)=>(0,b.jsx)("thead",{ref:d,className:(0,g.cn)("[&_tr]:border-b",a),...c}));i.displayName="TableHeader";let j=f.forwardRef(({className:a,...c},d)=>(0,b.jsx)("tbody",{ref:d,className:(0,g.cn)("[&_tr:last-child]:border-0",a),...c}));j.displayName="TableBody",f.forwardRef(({className:a,...c},d)=>(0,b.jsx)("tfoot",{ref:d,className:(0,g.cn)("border-t bg-muted/50 font-medium [&>tr]:last:border-b-0",a),...c})).displayName="TableFooter";let k=f.forwardRef(({className:a,...c},d)=>(0,b.jsx)("tr",{ref:d,className:(0,g.cn)("border-b transition-colors hover:bg-muted/50 data-[state=selected]:bg-muted",a),...c}));k.displayName="TableRow";let l=f.forwardRef(({className:a,...c},d)=>(0,b.jsx)("th",{ref:d,className:(0,g.cn)("h-12 px-4 text-left align-middle font-medium text-muted-foreground [&:has([role=checkbox])]:pr-0",a),...c}));l.displayName="TableHead";let m=f.forwardRef(({className:a,...c},d)=>(0,b.jsx)("td",{ref:d,className:(0,g.cn)("p-4 align-middle [&:has([role=checkbox])]:pr-0",a),...c}));m.displayName="TableCell",f.forwardRef(({className:a,...c},d)=>(0,b.jsx)("caption",{ref:d,className:(0,g.cn)("mt-4 text-sm text-muted-foreground",a),...c})).displayName="TableCaption";var n=a.i(81136);let o=(0,n.default)("chart-column",[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]]),p=(0,n.default)("chart-pie",[["path",{d:"M21 12c.552 0 1.005-.449.95-.998a10 10 0 0 0-8.953-8.951c-.55-.055-.998.398-.998.95v8a1 1 0 0 0 1 1z",key:"pzmjnu"}],["path",{d:"M21.21 15.89A10 10 0 1 1 8 2.83",key:"k2fpak"}]]),q=(0,n.default)("dollar-sign",[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]]);async function r({searchParams:a}){let f=await (0,c.auth)();if(!f?.user?.id)return null;let g=Number((await a).year)||new Date().getFullYear(),n=new Date(g,0,1),r=new Date(g,11,31,23,59,59),s=await (0,d.getReportData)(n,r);if("error"in s)return(0,b.jsxs)("div",{className:"p-12 text-center text-red-500",children:["Error loading reports: ",s.error]});let{summary:t,entries:u}=s,v=new Map;return u.forEach(a=>{let b=a.userId,c=a.user.name||"Unknown",d=a.durationSeconds/3600,e=a.project?.billableRate??a.user.billableRate??0,f=a.isBillable&&(a.project?.isBillable??!0),g=v.get(b)||{name:c,totalHours:0,billableHours:0,billableAmount:0,utilization:0};g.totalHours+=d,f&&(g.billableHours+=d,g.billableAmount+=d*e),v.set(b,g)}),Array.from(v.values()).forEach(a=>{a.utilization=a.totalHours>0?a.billableHours/a.totalHours*100:0}),(0,b.jsxs)("div",{className:"space-y-8 max-w-6xl mx-auto",children:[(0,b.jsx)("div",{className:"flex items-center justify-between",children:(0,b.jsxs)("div",{children:[(0,b.jsxs)("h1",{className:"text-3xl font-bold tracking-tight",children:["Reports: ",g]}),(0,b.jsx)("p",{className:"text-muted-foreground",children:"Performance and billing overview."})]})}),(0,b.jsxs)("div",{className:"grid gap-4 md:grid-cols-4",children:[(0,b.jsxs)(e.Card,{children:[(0,b.jsxs)(e.CardHeader,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,b.jsx)(e.CardTitle,{className:"text-sm font-medium",children:"Total Hours"}),(0,b.jsx)(o,{className:"h-4 w-4 text-muted-foreground"})]}),(0,b.jsx)(e.CardContent,{children:(0,b.jsx)("div",{className:"text-2xl font-bold",children:t.totalHours.toFixed(2)})})]}),(0,b.jsxs)(e.Card,{children:[(0,b.jsxs)(e.CardHeader,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,b.jsx)(e.CardTitle,{className:"text-sm font-medium",children:"Billable Hours"}),(0,b.jsx)(p,{className:"h-4 w-4 text-muted-foreground"})]}),(0,b.jsxs)(e.CardContent,{children:[(0,b.jsx)("div",{className:"text-2xl font-bold",children:t.billableHours.toFixed(2)}),(0,b.jsxs)("p",{className:"text-xs text-muted-foreground",children:[t.utilization.toFixed(1),"% Utilization"]})]})]}),(0,b.jsxs)(e.Card,{children:[(0,b.jsxs)(e.CardHeader,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,b.jsx)(e.CardTitle,{className:"text-sm font-medium",children:"Billable Amount"}),(0,b.jsx)(q,{className:"h-4 w-4 text-muted-foreground"})]}),(0,b.jsx)(e.CardContent,{children:(0,b.jsxs)("div",{className:"text-2xl font-bold",children:["$",t.billableAmount.toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2})]})})]}),(0,b.jsxs)(e.Card,{children:[(0,b.jsxs)(e.CardHeader,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,b.jsx)(e.CardTitle,{className:"text-sm font-medium",children:"Uninvoiced"}),(0,b.jsx)(q,{className:"h-4 w-4 text-muted-foreground"})]}),(0,b.jsx)(e.CardContent,{children:(0,b.jsx)("div",{className:"text-2xl font-bold text-muted-foreground",children:"$0.00"})})]})]}),(0,b.jsxs)(e.Card,{children:[(0,b.jsxs)(e.CardHeader,{children:[(0,b.jsx)(e.CardTitle,{children:"Team Performance"}),(0,b.jsx)(e.CardDescription,{children:"Breakdown by team member."})]}),(0,b.jsx)(e.CardContent,{children:(0,b.jsxs)(h,{children:[(0,b.jsx)(i,{children:(0,b.jsxs)(k,{children:[(0,b.jsx)(l,{children:"Name"}),(0,b.jsx)(l,{className:"text-right",children:"Total Hours"}),(0,b.jsx)(l,{className:"text-right",children:"Billable Hours"}),(0,b.jsx)(l,{className:"text-right",children:"Utilization"}),(0,b.jsx)(l,{className:"text-right",children:"Billable Amount"})]})}),(0,b.jsx)(j,{children:Array.from(v.values()).map(a=>(0,b.jsxs)(k,{children:[(0,b.jsx)(m,{className:"font-medium",children:a.name}),(0,b.jsx)(m,{className:"text-right",children:a.totalHours.toFixed(2)}),(0,b.jsx)(m,{className:"text-right",children:a.billableHours.toFixed(2)}),(0,b.jsxs)(m,{className:"text-right",children:[a.utilization.toFixed(0),"%"]}),(0,b.jsxs)(m,{className:"text-right",children:["$",a.billableAmount.toLocaleString(void 0,{minimumFractionDigits:2})]})]},a.name))})]})})]})]})}a.s(["default",()=>r],76298)}];

//# sourceMappingURL=%5Broot-of-the-server%5D__171a6f24._.js.map